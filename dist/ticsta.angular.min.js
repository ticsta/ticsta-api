!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=function(a,b,c){var d=a.endpoint("accounts",{credentials:c,id:function(a){return d.one(a)},authenticate:function(a){var c=this;return this.credentials.token?a?a(null,this.credentials.token):this.credentials.token:this.http._http(this.options.host+"/request_token","GET",{headers:{"x-api-key":this.credentials.key}},function(d,e,f){return a&&d||f.status?(d=d||f.error,a(d)):(c.credentials.token=f.access_token||f.token||c.credentials.token,b.setToken(c.credentials.token),void(a&&a(d,c.credentials.token)))})},setCredentials:function(a){this.credentials||(this.credentials={}),this.credentials.key=a.key,this.credentials.token=a.token},me:function(a){return this.http.request(this.url()+"/me","GET",a)},regenerateKey:function(a){return this.http.request(this.url()+"/me/key","PUT",a)}});return d}},{}],2:[function(a,b){b.exports={account:a("./account.js"),websites:a("./websites.js")}},{"./account.js":1,"./websites.js":3}],3:[function(a,b){b.exports=function(a){var b=a.endpoint("websites",{my:function(a){return this.http.request(this.url()+"/my","GET",a)},id:function(a){var b=this.one(a);return b.remove=function(a){return this.http.request(this.url(),"DELETE",a)},b.node=function(a){return this.http.request(this.url()+"/node","GET",a)},b.domains=b.endpoint("domains",{update:function(a,b,c){return this.http.request(this.url()+"/"+a,"PUT",{form:b},c)},remove:function(a,b){return this.http.request(this.url()+"/"+a,"DELETE",b)}}),b.members=b.endpoint("members",{me:function(a){return this.http.request(this.url()+"/me","GET",a)},invite:function(a,b){return this.http.request(this.url()+"/invite","POST",{form:a},b)},update:function(a,b,c){return this.http.request(this.url()+"/"+a,"PUT",{form:b},c)},remove:function(a,b){return this.http.request(this.url()+"/"+a,"DELETE",b)}}),b}});return b}},{}],4:[function(a){angular.module("ticsta",[]).provider("ticsta",function(){var b=a("../ticsta"),c=a("narrator").Http,d=a("narrator/lib/browser/asQ"),e=a("narrator/lib/browser/asHttp");return{_options:{},configure:function(a){this._options=a},$get:function(a,f,g){return a.narratorApply=function(a){var b=this.$root.$$phase;"$apply"===b||"$digest"===b?a&&"function"==typeof a&&a():this.$apply(a)},d(c,a,f),e(c,g),b.createClient(this._options)}}})},{"../ticsta":6,narrator:18,"narrator/lib/browser/asHttp":12,"narrator/lib/browser/asQ":13}],5:[function(a,b){b.exports=function(a,b){return a=a||{},Object.keys(b).forEach(function(c){"undefined"==typeof a[c]&&(a[c]=b[c])}),a}},{}],6:[function(a,b){(function(c){var d=a("narrator"),e=a("tiny-emitter"),f=(a("amp-extend"),a("re-emitter")),g=a("./helpers/defaults"),h=a("./api"),i="0.0.1",j=function(a){this.defaults={},this.options=g(a,this.defaults),this.events=new e;var b={host:c.env.TICSTA_API_URL||a.host||"https://api.ticsta.com",headers:{}};if(c.env.TICSTA_API_VERSION||a.version||i){var j=c.env.TICSTA_API_VERSION||a.version||i;b.headers["Accept-Version"]=j}a.token&&this.setToken(a.token),this._api=new d(b),this.account=h.account(this._api,this,a),this.websites=h.websites(this._api,this),f(this._api,this.events,["response","response:success","response:error"])};j.createClient=function(a){return new j(a)},j.prototype.setToken=function(a){this.options.token=a,this._api.headers["x-api-token"]=a},j.prototype.setKey=function(a){this.options.key=a},b.exports=j}).call(this,a("_process"))},{"./api":2,"./helpers/defaults":5,_process:11,"amp-extend":7,narrator:18,"re-emitter":21,"tiny-emitter":22}],7:[function(a,b){var c=a("amp-is-object");b.exports=function(a){if(!c(a))return a;for(var b,d,e=1,f=arguments.length;f>e;e++){b=arguments[e];for(d in b)a[d]=b[d]}return a}},{"amp-is-object":8}],8:[function(a,b){b.exports=function(a){var b=typeof a;return!!a&&("function"===b||"object"===b)}},{}],9:[function(){},{}],10:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],11:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],12:[function(a,b){b.exports=function(a,b){a.prototype._request=function(a,c){a.data=a.data||a.form,angular.extend(a,this.options.context.options.api._xhr),b(a).success(function(a){var b=a.self||a;c(null,b,b)}).error(function(a){c(a)})}}},{}],13:[function(a,b){b.exports=function(a,b,c){a.prototype._promiseWrap=function(a){var d=c.defer();return a(function(a){b.narratorApply(function(){d.resolve(a)})},function(a){b.narratorApply(function(){d.reject(a)})}),d.promise}}},{}],14:[function(a,b){var c=a("./helpers/defaults"),d=a("extend"),e=a("url-join"),f=a("./http"),g=b.exports=function(a){this.hooks={pre:function(a){a()}},this.options={host:"",path:"",headers:{},_endpoints:{}},a||(a={}),a.userDefined||(a.userDefined={}),c(a.userDefined.hooks,this.hooks),d(this.options,a),d(this,a.userDefined),this.http=new f({context:this,headers:this.options.headers,hooks:this.hooks})},h=a("./entity");g.prototype.url=function(){return e(this.options.host,this.options.path)},g.prototype.one=function(a,b){var c=new h({_endpoints:this.options._endpoints,host:this.options.host,path:e("/",this.options.path),headers:this.options.headers,userDefined:b||{},id:a,api:this.options.api});return c},g.prototype.list=function(a){return this.http.request(this.url(),"GET",function(b,c,d){a&&a(b,d)})},g.prototype.create=function(a,b){var c={form:a};return this.http.request(this.url(),"POST",c,function(a,c,d){b&&b(a,d)})},g.prototype.getEndpoint=function(a,b){var c=b?a+b:a;return this.options._endpoints[c]}},{"./entity":15,"./helpers/defaults":16,"./http":17,extend:19,"url-join":20}],15:[function(a,b){var c=a("./http"),d=a("url-join"),e=a("./helpers/defaults"),f=a("extend"),g=b.exports=function(a){this.hooks={pre:function(a){a()}},this.options={host:"",path:"",headers:{},id:0,_endpoints:{}},a||(a={}),a.userDefined||(a.userDefined={}),e(a.userDefined.hooks,this.hooks),f(this.options,a),f(this,a.userDefined),this.http=new c({context:this,headers:this.options.headers,hooks:this.hooks})},h=a("./narrator");g.prototype.endpoint=function(a,b){var c=new h({id:this.options.id,host:this.url(),headers:this.options.headers,_endpoints:this.options._endpoints});return c.endpoint(a,b)},g.prototype.url=function(){return d(this.options.host,this.options.path,this.options.id)},g.prototype.get=function(a){return this.http.request(this.url(),"GET",function(b,c,d){a&&a(b,d)})},g.prototype.update=function(a,b){var c={form:a};return this.http.request(this.url(),"PUT",c,function(a,c,d){b&&b(a,d)})},g.prototype.remove=function(a){return this.http.request(this.url(),"DELETE",function(b,c,d){a&&a(b,d)})},g.prototype.getEndpoint=function(a,b){var c=b?a+b:a;return this.options._endpoints[c]}},{"./helpers/defaults":16,"./http":17,"./narrator":18,extend:19,"url-join":20}],16:[function(a,b,c){arguments[4][5][0].apply(c,arguments)},{dup:5}],17:[function(a,b){(function(c){var d=a("extend"),e=a("./helpers/defaults"),f=a("request"),g=a("promise"),h=b.exports=function(a){function b(a){return a.options.context.options&&a.options.context.options.api&&a.options.context.options.api.promise}this.options={headers:{},hooks:{},context:{}},d(this.options,a),this.promise=b(this)?this.options.context.options.api.promise:function(a){return new g(a)}};h.prototype.setHeaders=function(a){this.options.headers=a},h.prototype.setHeader=function(a,b){this.options.headers[a]=b},h.prototype.removeHeader=function(a){delete this.options.headers[a]},h.prototype._parseJSON=function(a){try{a=JSON.parse(a)}catch(b){}finally{return a}},h.prototype._promiseWrap=function(a){return new g(a)},h.prototype._request=f,h.prototype._http=function(a,b,c,d){var f=this;"function"==typeof c&&(d=c,c={}),"undefined"==typeof d&&(d=function(){});var g={url:a,method:b};return g=e(c,g),this._promiseWrap(function(a,b){f._request(g,function(c,e,g){var h,i=f._parseJSON(g);f.options.context&&f.options.context.options.api&&(h=f.options.context.options.api),h&&h.emit("response",{error:c,response:e}),c||e.statusCode>=400?(h.emit("response:error",c||e),b(c)):(h.emit("response:success",e),a(i)),d(c,e,i)})})},h.prototype.request=function(a,b,e,f){var g=this;"function"==typeof e&&(f=e,e={});var h={},i={};return d(h,{headers:this.options.headers},e),d(i,h,{path:a,method:b}),this._promiseWrap(function(d,e){c.nextTick(function(){var c=g.options.hooks&&g.options.hooks.pre?g.options.hooks.pre:function(a){a()};c.call(g.options.context,function(){g._http(a,b,h,f).then(d,e)})})})}}).call(this,a("_process"))},{"./helpers/defaults":16,_process:11,extend:19,promise:9,request:9}],18:[function(a,b){var c=a("extend"),d=a("url-join"),e=(a("promise"),a("tiny-emitter")),f=b.exports=function(a){a=a||{},this._endpoints={},this.host="/",c(this,new e,a);var b=this.endpoint("").http;this._request=b._http,this.createPromise=b._promiseWrap};f.Http=a("./http");var g=a("./endpoint");f.prototype.endpoint=function(a,b){var c=this.id?a+this.id:a;if(!(c in this._endpoints)){var e=new g({host:this.host,path:d("/",a),headers:this.headers,userDefined:b||{},_endpoints:this._endpoints,api:this});this._endpoints[c]=e}return this._endpoints[c]},f.prototype._xhr={},f.prototype.withCredentials=function(a){return this.xhr("withCredentials",a),this},f.prototype.xhr=function(a,b){return this._xhr[a]=b,this}},{"./endpoint":14,"./http":17,extend:19,promise:9,"tiny-emitter":22,"url-join":20}],19:[function(a,b){var c,d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=function(a){"use strict";if(!a||"[object Object]"!==e.call(a))return!1;var b=d.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&d.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!f)return!1;var g;for(g in a);return g===c||d.call(a,g)};b.exports=function g(){"use strict";var a,b,d,e,h,i,j=arguments[0],k=1,l=arguments.length,m=!1;for("boolean"==typeof j?(m=j,j=arguments[1]||{},k=2):("object"!=typeof j&&"function"!=typeof j||null==j)&&(j={});l>k;++k)if(a=arguments[k],null!=a)for(b in a)d=j[b],e=a[b],j!==e&&(m&&e&&(f(e)||(h=Array.isArray(e)))?(h?(h=!1,i=d&&Array.isArray(d)?d:[]):i=d&&f(d)?d:{},j[b]=g(m,i,e)):e!==c&&(j[b]=e));return j}},{}],20:[function(a,b){function c(a){return a.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}b.exports=function(){var a=[].slice.call(arguments,0).join("/");return c(a)}},{}],21:[function(a,b){function c(a,b,c){Array.isArray(c)||(c=[c]),c.forEach(function(c){a.on(c,function(){var a=[].slice.call(arguments);a.unshift(c),b.emit.apply(b,a)})})}function d(a,b){var d=new e;return c(a,d,b),d}b.exports=c,b.exports.filter=d;var e=a("events").EventEmitter},{events:10}],22:[function(a,b){function c(){}c.prototype={on:function(a,b,c){var d=this.e||(this.e={});return(d[a]||(d[a]=[])).push({fn:b,ctx:c}),this},once:function(a,b,c){var d=this,e=function(){d.off(a,e),b.apply(c,arguments)};return this.on(a,e,c)},emit:function(a){var b=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),d=0,e=c.length;for(d;e>d;d++)c[d].fn.apply(c[d].ctx,b);return this},off:function(a,b){var c=this.e||(this.e={}),d=c[a],e=[];if(d&&b)for(var f=0,g=d.length;g>f;f++)d[f].fn!==b&&e.push(d[f]);return e.length?c[a]=e:delete c[a],this}},b.exports=c},{}]},{},[4]);